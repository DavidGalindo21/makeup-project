
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Pedidos</title>

  <!-- Fuente -->
   <!-- Favicon -->

   <!-- CSS (Font, Vendor, Icon, Plugins & Style CSS files) -->

   <!-- Font CSS -->
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

   <!-- Vendor CSS (Bootstrap & Icon Font) -->
   <link rel="stylesheet" href="./assets/css/vendor/bootstrap.min.css">

   <!-- Plugins CSS (All Plugins Files) -->
   <link rel="stylesheet" href="assets/css/plugins/swiper-bundle.min.css">
   <link rel="stylesheet" href="assets/css/plugins/font-awesome.min.css">
   <link rel="stylesheet" href="assets/css/plugins/fancybox.min.css">
   <link rel="stylesheet" href="assets/css/plugins/nice-select.css">

   <!-- Style CSS -->
   <link rel="stylesheet" href="./assets/css/style.min.css">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>

  
    <!-- Font CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Vendor CSS (Bootstrap & Icon Font) -->
    <link rel="stylesheet" href="/css/vendor/bootstrap.min.css">

    <!-- Plugins CSS (All Plugins Files) -->
    <link rel="stylesheet" href="/css/plugins/swiper-bundle.min.css">
    <link rel="stylesheet" href="/css/plugins/font-awesome.min.css">
    <link rel="stylesheet" href="/css/plugins/fancybox.min.css">
    <link rel="stylesheet" href="/css/plugins/nice-select.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- Style CSS -->
    <link rel="stylesheet" href="/css/style.min.css">

</head>
<body>
    <!--== Wrapper Start ==-->
    <div class="wrapper">
        <!--== Start Header Wrapper ==-->
        <header class="header-area sticky-header header-transparent">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-5 col-lg-2 col-xl-1">
                        <div class="header-logo">
                            <a href="/">
                                <img class="logo-main" src="/images/logo.png" width="95" height="68" alt="Logo" />
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-7 col-xl-7 d-none d-lg-block">
                        <div class="header-navigation ps-7">
                            <ul class="main-nav justify-content-start">
                                <li class="has-submenu"><a href="/client/dashboard">Inicio</a>

                                </li>
                                <li><a href="about-us">sobre nosotros</a></li>
                                <% if (usuario) { %>
                                <li><a href="/client/misPedidos">Mis pedidos</a></li>
                                <% } %>
                            </ul>
                        </div>
                    </div>
                    <div class="col-7 col-lg-3 col-xl-4">
                        <div class="header-action justify-content-end">

                            <% if (usuario) { %>
                                <button class="header-action-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#AsideOffcanvasCart" aria-controls="AsideOffcanvasCart">
                                    <span class="icon">
                                        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                            <rect class="icon-rect" width="30" height="30" fill="url(#pattern2)"/>
                                            <defs>
                                                <pattern id="pattern2" patternContentUnits="objectBoundingBox" width="1" height="1">
                                                    <use xlink:href="#image0_504:9" transform="scale(0.0333333)"/>
                                                </pattern>
                                                <image id="image0_504:9" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABFUlEQVRIie2VMU7DMBSGvwAqawaYuAmKxCW4A1I5Qg4AA93KBbp1ZUVUlQJSVVbCDVhgzcTQdLEVx7WDQ2xLRfzSvzzb+d6zn2MYrkugBBYevuWsHKiFn2JBMwH8Bq6Aw1jgBwHOYwGlPgT4LDZ4I8BJDNiEppl034UEJ8DMAJ0DByHBACPgUYEugePQUKkUWAmnsaB/Ry/YO9aXCwlT72AdrqaWEohwBWxSwc8ReIVtYIr5bM5pXqO+Men7rozGlkVSv4lJj1WQfsbvXVkNVNk1eEK4ik9/yuwzAPhLh5iuU4jtftMDR4ZJJXChxTJ2H3zXGDgWc43/X2Wro8G81a8u2fXU2nXiLVAxvNIKuPGW/r/2SltF+a3Rkw4pmwAAAABJRU5ErkJggg=="/>
                                            </defs>
                                        </svg>
                                    </span>
                                </button>
                            <% } %>
                            

                            <% if (!usuario) { %>
                                <a class="header-action-btn" href="account-login">
                                  <span class="icon">
                                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                      <rect class="icon-rect" width="30" height="30" fill="url(#pattern3)"/>
                                      <defs>
                                        <pattern id="pattern3" patternContentUnits="objectBoundingBox" width="1" height="1">
                                          <use xlink:href="#image0_504:10" transform="scale(0.0333333)"/>
                                        </pattern>
                                        <image id="image0_504:10" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABEUlEQVRIie3UMUoDYRDF8Z8psqUpLBRrBS+gx7ATD6E5iSjeQQ/gJUzEwmChnZZaKZiQ0ljsLkhQM5/5Agr74DX7DfOfgZ1Hoz+qAl30Marcx2H1thCtY4DJN76parKqmAH9DM+6eTcArX2QE3yVAO7lBA8TwMNIw6UgeJI46My+rWCjUQL0LVIUBd8lgEO1UfBZAvg8oXamCuWNRu64nRNMmUo/wReSXLXayoDoKc9miMvqW/ZNG2VRNLla2MYudrCFTvX2intlnl/gGu/zDraGYzyLZ/UTjrD6G2AHpxgnAKc9xgmWo9BNPM4BnPYDNiLg24zQ2oNpyFdZvRKZLlGhnvvKPzXXti/Yy7hEo3+iD9EHtgdqxQnwAAAAAElFTkSuQmCC"/>
                                      </defs>
                                    </svg>
                                  </span>
                                </a>
                              <% } %>
                              
                         
                        <% if(usuario) { %>
                            <button class="header-action-btn" type="button" onclick="logoutUser()">
                                <span class="icon">
                                    <svg width="30" height="30" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M12 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </span>
                            </button>

                            <% } %>
                            

                            <button class="header-menu-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#AsideOffcanvasMenu" aria-controls="AsideOffcanvasMenu">
                                <span></span>
                                <span></span>
                                <span></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <br><br><br><br>
        
            <h1>Mis pedidos</h1> <br><br>
            <div class="max-w-7xl mx-auto">
              <% Object.keys(pedidosAgrupados).forEach(fecha => { %>
                <h2 class="text-xl font-bold mb-4 text-gray-700">ðŸ“… Pedidos del <%= fecha %></h2>
            
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                  <% pedidosAgrupados[fecha].forEach(pedido => { %>
                    <div class="bg-white rounded-2xl shadow-lg p-4 border border-gray-200 hover:shadow-2xl transition-all duration-300">
                      <div class="flex flex-col items-center">
                        <div class="aspect-square w-24 mb-3">
                          <img src="/uploads/<%= pedido.producto?.imagen %>" alt="Producto" class="w-full h-full object-cover rounded-xl border shadow" />
                        </div>
                        <h2 class="text-lg font-semibold text-gray-800 mb-1 text-center">
                          <%= pedido.producto?.nombre %>
                        </h2>
                      </div>
                      <div class="text-sm text-gray-600 space-y-1 mt-1">
                        <p><span class="font-semibold text-gray-800">Cliente:</span> <%= pedido.usuario?.Nombre %></p>
                        <p><span class="font-semibold text-gray-800">TelÃ©fono:</span> <%= pedido.usuario?.Telefono %></p>
                        <p><span class="font-semibold text-gray-800">Precio por unidad:</span> $<%= pedido.producto?.precio_venta %></p>
                        <p><span class="font-semibold text-gray-800">Cantidad:</span> <%= pedido.cantidad %></p>
                        <p>
                          <span class="font-semibold text-gray-800">Total:</span>
                          <span class="text-green-600 font-bold">$<%= pedido.precioTotal %></span>
                        </p>
                        <p>
                          <span class="font-semibold text-gray-800">Estatus:</span>
                          <span class="badge <%= pedido.status === 'pendiente' ? 'bg-warning text-dark' : (pedido.status === 'en proceso' ? 'bg-info text-dark' : 'bg-success') %>">
                            <%= pedido.status %>
                          </span>
                        </p>
                      </div>
                    </div>
                  <% }) %>
                </div>
              <% }) %>
            </div>
            
            
            


            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
            <script src="/js/main.js"></script>
          </body>          
</html>
